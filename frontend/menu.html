<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Descubre nuestro men√∫ de ensaladas frescas: CobbFit, C√©sar, Tropical y Mediterr√°nea. Ingredientes 100% org√°nicos.">
    <title>Men√∫ - Ensaladazo!</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="CSS/styles-Menu.css">
</head>

<body>
<!-- HEADER CON NAVEGACI√ìN -->
<header class="header">
    <nav class="nav">
        <!-- Logo -->
        <div class="nav-brand">
            <a href="index.html" class="logo-hover">
                <img class="logo-image" src="Images/Logos/logo-removebg-preview.png" alt="Logo Ensaladazo!">
            </a>
        </div>

        <!-- Men√∫ de navegaci√≥n -->
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Inicio</a></li>
            <li><a href="./menu.html" class="nav-link active">Men√∫</a></li>
            <li><a href="nosotros.html" class="nav-link">Nosotros</a></li>
            <li><a href="contacto.html" class="nav-link">Contacto</a></li>
        </ul>

        <!-- Acciones usuario -->
        <div class="nav-actions">
            <a href="login.html" class="cta-button">Iniciar Sesi√≥n</a>
            <a href="cart.html" class="cart-icon" aria-label="Ver carrito">
                <i data-lucide="shopping-cart"></i>
                <span class="cart-badge" id="cart-count">0</span>
            </a>
        </div>
    </nav>
</header>

<!-- HERO DE MEN√ö -->
<section class="menu-hero">
    <div class="hero-overlay"></div>
    <div class="menu-hero-content">
        <h1>Nuestro <span class="highlight">Men√∫</span></h1>
        <p class="menu-intro">
            Cada ensalada es una experiencia √∫nica. Preparamos todo fresco cada d√≠a,
            con ingredientes que hacen la diferencia. No es solo comida saludable,
            es comida que realmente te va a gustar.
        </p>
    </div>
</section>

<!-- SECCI√ìN DE ENSALADAS -->
<section class="menu-section">
    <div class="container" id="salads-container">
        <!-- Las ensaladas se cargar√°n aqu√≠ din√°micamente -->
        <div style="text-align: center; padding: 60px 20px;">
            <div style="display: inline-block;">
                <div style="width: 50px; height: 50px; border: 4px solid #f3f3f3; border-top: 4px solid #4CAF50; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <p style="margin-top: 20px; color: #666; font-size: 16px;">Cargando nuestras deliciosas ensaladas...</p>
            </div>
        </div>
    </div>
</section>

<!-- SECCI√ìN ADICIONAL -->
<section class="extras-section">
    <div class="container">
        <h2>¬øAlgo M√°s?</h2>
        <div class="extras-grid" id="extras-container">
            <!-- Los extras se cargar√°n aqu√≠ din√°micamente -->
            <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                <p style="color: #666;">Cargando extras...</p>
            </div>
        </div>
    </div>
</section>

<!-- BOT√ìN DE ENSALADA PERSONALIZADA -->
<div class="custom-salad-card">
    <div class="card-background"></div>
    <div class="card-content">
        <div class="card-icon">
            <i data-lucide="sparkles" size="40"></i>
        </div>
        <h3 class="card-title">¬øNinguna te convence?<br><span class="highlight">¬°Crea la tuya!</span></h3>
        <p class="card-description">
            Mezcla y combina tus ingredientes favoritos para crear la ensalada perfecta a tu gusto.
            T√∫ eliges cada detalle, nosotros la preparamos con todo el amor y frescura.
        </p>
        <div class="card-features">
            <div class="feature">
                <i data-lucide="check" size="16"></i>
                <span>Elige tus ingredientes</span>
            </div>
            <div class="feature">
                <i data-lucide="check" size="16"></i>
                <span>Precio seg√∫n lo que elijas</span>
            </div>
            <div class="feature">
                <i data-lucide="check" size="16"></i>
                <span>Totalmente personalizable</span>
            </div>
        </div>
        <a href="armarensaladazo.html" class="create-btn">
            <i data-lucide="chef-hat" size="20"></i>
            Armar Mi Ensaladazo
        </a>
    </div>
</div>

<!-- FOOTER -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-brand">
                <div class="logo-hover">
                    <img class="logo-image" src="Images/Logos/logo-removebg-preview.png" alt="Logo Ensaladazo!" loading="lazy">
                </div>
                <p>Nutrici√≥n fresca para tu vida diaria</p>
            </div>

            <div class="footer-links">
                <h4>Enlaces R√°pidos</h4>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="./menu.html">Men√∫</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </div>

            <div class="footer-info">
                <h4>Horarios</h4>
                <p>Lun - Vie: 9:00 AM - 5:00 PM</p>
                <p>S√°bado: 9:00 AM - 3:00 PM</p>
                <p>Domingo: Cerrado</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 Ensaladazo!. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>

<!-- Animaci√≥n de carga -->
<style>
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<!-- Scripts -->
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<script src="JavaScript/Inicio.js"></script>

<!-- Script para cargar productos din√°micamente -->
<script>
    // Cargar productos desde el backend
    async function loadMenuProducts() {
        try {
            console.log('üîÑ Cargando productos del men√∫ desde el backend...');

            const response = await fetch(`${API_URL}/api/products`);

            if (!response.ok) {
                throw new Error('Error al cargar productos');
            }

            const products = await response.json();
            console.log('‚úÖ Productos cargados:', products);

            // Separar por categor√≠a
            const ensaladas = products.filter(p => p.category === 'ensaladas' || p.category === 'Ensalada');
            const extras = products.filter(p => p.category === 'extras' || p.category === 'Extra');

            // Renderizar ensaladas
            renderSalads(ensaladas);

            // Renderizar extras
            renderExtras(extras);

            // Inicializar iconos de Lucide
            lucide.createIcons();

        } catch (error) {
            console.error('‚ùå Error al cargar productos:', error);

            // Mostrar mensaje de error
            document.getElementById('salads-container').innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #f44336;">
                        <p style="font-size: 18px; margin-bottom: 10px;">‚ö†Ô∏è No se pudieron cargar los productos</p>
                        <p style="color: #666;">Verifica que el backend est√© corriendo</p>
                    </div>
                `;
        }
    }

    // Renderizar ensaladas (estilo grande)
    function renderSalads(salads) {
        const container = document.getElementById('salads-container');

        if (salads.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: #666;">No hay ensaladas disponibles</p>';
            return;
        }

        container.innerHTML = '';

        salads.forEach(salad => {
            const article = document.createElement('article');
            article.className = 'menu-item-large';

            // Mapeo de im√°genes por nombre
            const imageMap = {
                'Ensalada CobbFit': 'Images/Ensaladas/cobbfit.jpeg',
                'Ensalada C√©sar': 'Images/Ensaladas/cesar.jpeg',
                'Ensalada Tropical': 'Images/Ensaladas/tropical.jpeg',
                'Ensalada Mediterr√°nea': 'Images/Ensaladas/mediterranea.jpeg'
            };

            // Mapeo de taglines
            const taglineMap = {
                'Ensalada CobbFit': 'La favorita por una raz√≥n',
                'Ensalada C√©sar': 'Un cl√°sico que nunca falla',
                'Ensalada Tropical': 'Dale sabor a tu d√≠a',
                'Ensalada Mediterr√°nea': 'Sabores del mundo en tu plato'
            };

            // Mapeo de badges
            const badgesMap = {
                'Ensalada CobbFit': ['Alto en prote√≠na', 'Ingredientes frescos', 'S√∫per completa'],
                'Ensalada C√©sar': ['Cl√°sica', 'Ligera y satisfactoria', 'Para todos los d√≠as'],
                'Ensalada Tropical': ['Frutas frescas', 'Sabor √∫nico', 'Refrescante'],
                'Ensalada Mediterr√°nea': ['Sabores intensos', 'Estilo mediterr√°neo', 'Muy sabrosa']
            };

            const imageSrc = salad.image_url || imageMap[salad.name] || 'Images/Ensaladas/default.jpeg';
            const tagline = taglineMap[salad.name] || 'Deliciosa y saludable';
            const badges = badgesMap[salad.name] || ['Fresca', 'Saludable', 'Deliciosa'];

            article.innerHTML = `
                    <div class="item-image">
                        <img src="${imageSrc}" alt="${salad.name}">
                    </div>
                    <div class="item-details">
                        <h2>${salad.name}</h2>
                        <p class="item-tagline">${tagline}</p>
                        <p class="item-description">${salad.description}</p>
                        <div class="item-highlights">
                            ${badges.map(badge => `<span class="highlight-badge">${badge}</span>`).join('')}
                        </div>
                        <div class="item-footer">
                            <span class="price">$${parseFloat(salad.price).toFixed(2)}</span>
                            <button class="order-btn"
                                    data-product-name="${salad.name}"
                                    data-product-price="${salad.price}">
                                Agregar al Carrito
                            </button>
                        </div>
                    </div>
                `;

            // Agregar evento al bot√≥n
            const button = article.querySelector('.order-btn');
            button.addEventListener('click', function() {
                const productName = this.getAttribute('data-product-name');
                const productPrice = parseFloat(this.getAttribute('data-product-price'));

                if (typeof addToCart === 'function') {
                    addToCart(productName, productPrice);
                } else {
                    console.error('‚ùå Funci√≥n addToCart no disponible');
                }
            });

            container.appendChild(article);
        });
    }

    // Renderizar extras
    function renderExtras(extras) {
        const container = document.getElementById('extras-container');

        if (extras.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: #666;">No hay extras disponibles</p>';
            return;
        }

        container.innerHTML = '';

        // Mapeo de iconos
        const iconMap = {
            'Smoothie Verde': 'droplet',
            'Aderezos Extra': 'sparkles',
            'Aderezo Extra': 'sparkles',
            'Prote√≠na Extra': 'beef',
            'Pan Tostado': 'wheat'
        };

        extras.forEach(extra => {
            const article = document.createElement('article');
            article.className = 'extra-item';

            const icon = iconMap[extra.name] || 'circle';

            article.innerHTML = `
                    <i data-lucide="${icon}" size="50"></i>
                    <h3>${extra.name}</h3>
                    <p>${extra.description}</p>
                    <span class="extra-price">$${parseFloat(extra.price).toFixed(2)}</span>
                    <button class="extra-btn"
                            data-product-name="${extra.name}"
                            data-product-price="${extra.price}">
                        Agregar
                    </button>
                `;

            // Agregar evento al bot√≥n
            const button = article.querySelector('.extra-btn');
            button.addEventListener('click', function() {
                const productName = this.getAttribute('data-product-name');
                const productPrice = parseFloat(this.getAttribute('data-product-price'));

                if (typeof addToCart === 'function') {
                    addToCart(productName, productPrice);
                } else {
                    console.error('‚ùå Funci√≥n addToCart no disponible');
                }
            });

            container.appendChild(article);
        });
    }

    // Cargar productos cuando el DOM est√© listo
    document.addEventListener('DOMContentLoaded', function() {
        loadMenuProducts();

        // Inicializar iconos
        lucide.createIcons();

        // Hacer toda la card clickeable
        const customCard = document.querySelector('.custom-salad-card');
        if (customCard) {
            customCard.addEventListener('click', function(e) {
                if (e.target.tagName !== 'A' && !e.target.closest('a')) {
                    window.location.href = 'armarensaladazo.html';
                }
            });
        }
    });
</script>
</body>
</html>